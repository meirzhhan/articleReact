"use strict";(self.webpackChunkarticle_react=self.webpackChunkarticle_react||[]).push([[839],{4839:function(e,n,t){t.r(n),t.d(n,{default:function(){return W}});var r,a=t(4848),l=t(6540),i=t(2389),o=t(1468),c=t(1893),s=t(159),u=t(3974),d=t(4211);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},p.apply(null,arguments)}var h=e=>l.createElement("svg",p({width:"1em",height:"1em",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=l.createElement("path",{d:"M10.0746 1.633C10.3946 0.789 11.6056 0.789 11.9266 1.633L13.9966 7.367C14.0688 7.55379 14.1959 7.71428 14.3613 7.8273C14.5266 7.94031 14.7223 8.00053 14.9226 8H20.0096C20.9496 8 21.3596 9.17 20.6206 9.743L17.0006 13C16.8384 13.1247 16.7199 13.2975 16.6621 13.4937C16.6042 13.6898 16.61 13.8993 16.6786 14.092L18.0006 19.695C18.3226 20.595 17.2806 21.368 16.4926 20.814L11.5756 17.694C11.4072 17.5757 11.2064 17.5122 11.0006 17.5122C10.7948 17.5122 10.594 17.5757 10.4256 17.694L5.50856 20.814C4.72156 21.368 3.67856 20.594 4.00056 19.695L5.32257 14.092C5.39114 13.8993 5.39692 13.6898 5.33907 13.4937C5.28122 13.2975 5.16272 13.1247 5.00057 13L1.38056 9.743C0.640565 9.17 1.05256 8 1.99056 8H7.07756C7.27786 8.00067 7.47363 7.9405 7.63898 7.82747C7.80433 7.71444 7.93147 7.55387 8.00357 7.367L10.0736 1.633H10.0746Z",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}))),f=function(){return f=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},f.apply(this,arguments)},v=[1,2,3,4,5],g=(0,l.memo)((function(e){var n=e.className,t=e.onSelect,r=e.size,i=void 0===r?30:r,o=e.selectedStars,c=void 0===o?0:o,s=(0,l.useState)(c),p=s[0],g=s[1],m=(0,l.useState)(Boolean(c)),j=m[0],x=m[1],b=function(){j||g(0)},C=function(e){return function(){j||(null==t||t(e),g(e),x(!0))}};return(0,a.jsx)("div",{className:(0,u.b)("qmr5IJtj",{},[n]),children:v.map((function(e){var n,t,r={className:(0,u.b)("Z1C6YFZ0",(n={},n.ouStZWWc=j,n),[p>=e?"QpbxqwVr":"Yv7EH3L0"]),Svg:h,width:i,height:i,onMouseLeave:b,onMouseEnter:(t=e,function(){j||g(t)}),onClick:C(e)};return(0,a.jsx)(d.I,f({clickable:!j},r),e)}))})})),m=t(8749),j=t(5601),x=t(2204),b=t(3361),C=t(5408),y=t(5279),O=t(114),k=(0,l.memo)((function(e){e.className;var n=e.title,t=e.feedbackTitle,r=e.hasFeedback,o=e.onCancel,c=e.onAccept,u=e.rate,d=void 0===u?0:u,p=(0,i.Bd)().t,h=(0,l.useState)(!1),f=h[0],v=h[1],k=(0,l.useState)(d),I=k[0],w=k[1],L=(0,l.useState)(""),S=L[0],W=L[1],_=(0,l.useCallback)((function(e){w(e),r?v(!0):null==c||c(e)}),[r,c]),N=(0,l.useCallback)((function(){v(!1),null==c||c(I,S)}),[S,c,I]),E=(0,l.useCallback)((function(){v(!1),null==o||o(I)}),[o,I]),R=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.E,{title:t}),(0,a.jsx)(C.p,{value:S,onChange:W,placeholder:p("Оставьте ваш отзыв")})]}),z=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(m.T,{align:"center",gap:"8",maxWidth:!0,children:[(0,a.jsx)(b.E,{title:I?p("Спасибо за оценку"):n}),(0,a.jsx)(g,{selectedStars:I,size:40,onSelect:_})]}),(0,a.jsx)(s.S7,{children:(0,a.jsx)(j.a,{isOpen:f,lazy:!0,children:(0,a.jsxs)(m.T,{gap:"32",maxWidth:!0,children:[R,(0,a.jsxs)(m.z,{maxWidth:!0,gap:"16",justify:"between",children:[(0,a.jsx)(y.$,{size:"m",onClick:E,children:p("Закрыть")}),(0,a.jsx)(y.$,{onClick:N,color:"success",children:p("Отправить")})]})]})})}),(0,a.jsx)(s.IM,{children:(0,a.jsx)(x._,{isOpen:f,lazy:!0,onClose:E,children:(0,a.jsxs)(m.T,{gap:"24",children:[R,(0,a.jsx)(y.$,{fullWidth:!0,onClick:N,size:"m",children:p("Отправить")})]})})})]});return(0,a.jsx)(O.Z,{padding:"24",max:!0,border:"partial",children:z})})),I=t(4018),w=t(3888).q.injectEndpoints({endpoints:function(e){return{getArticleRating:e.query({query:function(e){return{url:"/article-ratings",params:{userId:e.userId,articleId:e.articleId}}}}),rateArticle:e.mutation({query:function(e){return{url:"/article-ratings",method:"POST",body:e}}})}}}),L=w.useGetArticleRatingQuery,S=w.useRateArticleMutation,W=(0,l.memo)((function(e){var n,t=e.className,r=e.articleId,s=(0,i.Bd)().t,u=(0,o.d4)(c.ed),d=L({userId:null!==(n=null==u?void 0:u.id)&&void 0!==n?n:"",articleId:r}),p=d.data,h=d.isLoading,f=S(),v=f[0],g=(f[1],(0,l.useCallback)((function(e,n){var t;try{v({userId:null!==(t=null==u?void 0:u.id)&&void 0!==t?t:"",articleId:r,rate:e,feedback:n})}catch(e){console.log(e)}}),[r,v,null==u?void 0:u.id])),m=(0,l.useCallback)((function(e,n){g(e,n)}),[g]),j=(0,l.useCallback)((function(e){g(e)}),[g]);if(h)return(0,a.jsx)(I.E,{width:"100%",height:120,border:"12px"});var x=null==p?void 0:p[0];return(0,a.jsx)(k,{onCancel:j,onAccept:m,rate:null==x?void 0:x.rate,className:t,title:s("Оцените статью"),feedbackTitle:s("Оставьте свой отзыв"),hasFeedback:!0})}))},5408:function(e,n,t){t.d(n,{p:function(){return u}});var r=t(4848),a=t(6540),l=t(3974),i=t(8749),o=t(3361),c={InputWrapper:"LuFDUWoP",InputWrapper__input:"ery3YlX7",InputWrapper__addOnLeft:"Qvpr801k",InputWrapper__addOnRight:"FIvTSia7",s:"iqOIhKTe",m:"cUiCI1P9",l:"vgQzu3V8",withAddonLeft:"RwdSG5Ea",withAddonRight:"dr5QlRtl",focused:"NIL8h49X",readonly:"fTN1PnWu"},s=function(){return s=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},s.apply(this,arguments)},u=(0,a.memo)((function(e){var n,t=e.className,u=e.value,d=e.onChange,p=e.type,h=void 0===p?"text":p,f=e.placeholder,v=e.autofocus,g=e.readonly,m=e.addonLeft,j=e.addonRight,x=e.label,b=e.size,C=void 0===b?"m":b,y=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t}(e,["className","value","onChange","type","placeholder","autofocus","readonly","addonLeft","addonRight","label","size"]),O=(0,a.useRef)(null),k=(0,a.useState)(!1),I=k[0],w=k[1];(0,a.useEffect)((function(){var e;v&&(w(!0),null===(e=O.current)||void 0===e||e.focus())}),[v]);var L=((n={})[c.readonly]=g,n[c.focused]=I,n[c.withAddonLeft]=Boolean(m),n[c.withAddonRight]=Boolean(j),n),S=(0,r.jsxs)("div",{className:(0,l.b)(c.InputWrapper,L,[t,c[C]]),children:[(0,r.jsx)("div",{className:c.InputWrapper__addOnLeft,children:m}),(0,r.jsx)("input",s({className:c.InputWrapper__input,ref:O,type:h,value:u,onChange:function(e){null==d||d(e.target.value)},onFocus:function(){w(!0)},onBlur:function(){w(!1)},readOnly:g,placeholder:f},y)),(0,r.jsx)("div",{className:c.InputWrapper__addOnRight,children:j})]});return x?(0,r.jsxs)(i.z,{maxWidth:!0,gap:"8",children:[(0,r.jsx)(o.E,{text:x}),S]}):S}))}}]);